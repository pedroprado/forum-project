{"ast":null,"code":"var _jsxFileName = \"/home/pedrolocal/Desktop/Projects/ForumProject/forum-app/src/containers/QuestionDetailPage.js\";\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport BackButton from '../components/UI/BackButton/BackButton';\nimport AnswerList from '../components/QuestionDetail/AnswerList/AnswerList';\nimport QuestionBox from '../components/QuestionDetail/QuestionBox/QuestionBox';\nimport AddAnswerForm from '../components/UI/Forms/AddAnswerForm';\nimport AuthContext from '../context/AuthContext';\nimport './QuestionDetailPage.css';\nimport { findAllByQuestionId, createAnswer } from '../services/Answer';\n\nclass QuestionDetailPage extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.fetchAnswersByQuestionId = async questionId => {\n      const answers = await findAllByQuestionId(questionId);\n      this.setState({\n        answers: [...answers]\n      });\n    };\n\n    this.saveAnswer = async (newAnswer, username, questionId) => {\n      const answer = {\n        text: newAnswer,\n        user: username,\n        questionId: questionId\n      };\n      await createAnswer(answer);\n    };\n\n    this.onNewAnswerChange = event => {\n      this.setState({\n        newAnswer: event.target.value\n      });\n    };\n\n    this.onNewAnswerSubmit = async (event, username, questionId) => {\n      if (window.confirm('Tem certeza que deseja enviar resposta?')) {\n        await this.saveAnswer(this.state.newAnswer, username, questionId);\n      }\n\n      event.preventDefault();\n      this.fetchAnswersByQuestionId(this.props.selectedQuestion.id);\n    };\n\n    this.componentDidMount = () => {\n      this.fetchAnswersByQuestionId(this.props.selectedQuestion.id);\n    };\n\n    this.state = {\n      newAnswer: '',\n      answers: []\n    };\n  }\n\n  render() {\n    const {\n      selectedQuestion\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"QuestionDetailPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BackButton, {\n      clicked: () => this.props.backButtonClicked(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(QuestionBox, {\n      question: selectedQuestion.text,\n      user: selectedQuestion.user,\n      answers: this.state.answers.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(AnswerList, {\n      answerList: this.state.answers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(AuthContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, context => /*#__PURE__*/React.createElement(AddAnswerForm, {\n      questionId: selectedQuestion.id,\n      username: context.username,\n      newAnswer: this.state.newAnswer,\n      onNewAnswerChange: this.onNewAnswerChange,\n      onNewAnswerSubmit: this.onNewAnswerSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 33\n      }\n    })));\n  }\n\n}\n\nQuestionDetailPage.defaultProps = {\n  selectedQuestion: {\n    id: '',\n    text: '',\n    user: '',\n    creationDate: '',\n    answers: []\n  }\n};\nQuestionDetailPage.propTypes = {\n  backButtonClicked: PropTypes.func,\n  selectedQuestion: PropTypes.object\n};\nexport default QuestionDetailPage;","map":{"version":3,"sources":["/home/pedrolocal/Desktop/Projects/ForumProject/forum-app/src/containers/QuestionDetailPage.js"],"names":["React","PureComponent","PropTypes","BackButton","AnswerList","QuestionBox","AddAnswerForm","AuthContext","findAllByQuestionId","createAnswer","QuestionDetailPage","constructor","props","fetchAnswersByQuestionId","questionId","answers","setState","saveAnswer","newAnswer","username","answer","text","user","onNewAnswerChange","event","target","value","onNewAnswerSubmit","window","confirm","state","preventDefault","selectedQuestion","id","componentDidMount","render","backButtonClicked","length","context","defaultProps","creationDate","propTypes","func","object"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport BackButton from '../components/UI/BackButton/BackButton';\nimport AnswerList from '../components/QuestionDetail/AnswerList/AnswerList';\nimport QuestionBox from '../components/QuestionDetail/QuestionBox/QuestionBox';\nimport AddAnswerForm from '../components/UI/Forms/AddAnswerForm';\nimport AuthContext from '../context/AuthContext';\nimport './QuestionDetailPage.css';\n\nimport { findAllByQuestionId, createAnswer } from '../services/Answer';\n\nclass QuestionDetailPage extends PureComponent{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            newAnswer: '',\n            answers: []\n        }\n\n    }\n\n    fetchAnswersByQuestionId = async (questionId) => {\n        const answers = await findAllByQuestionId(questionId);\n        this.setState({ answers : [...answers]})\n    };\n\n    saveAnswer = async (newAnswer, username, questionId) => {\n        const answer = {text: newAnswer, user: username, questionId: questionId};\n        await createAnswer(answer);\n\t}\n\n\tonNewAnswerChange = (event) =>{\n\t\tthis.setState({newAnswer: event.target.value});\n\t}\n\n\tonNewAnswerSubmit = async (event, username, questionId) => {\n\t\tif (window.confirm('Tem certeza que deseja enviar resposta?')){\n\t\t\tawait this.saveAnswer(this.state.newAnswer, username, questionId)\n\t\t}\n        event.preventDefault();\n        this.fetchAnswersByQuestionId(this.props.selectedQuestion.id);\n    };\n\n    componentDidMount = () => {\n        this.fetchAnswersByQuestionId(this.props.selectedQuestion.id);\n    };\n\n    render(){\n        const { selectedQuestion } = this.props;\n        return(\n            <div className='QuestionDetailPage'>\n                <BackButton clicked={() => this.props.backButtonClicked()} />\n                <QuestionBox \n                    question={selectedQuestion.text}\n                    user={selectedQuestion.user}\n                    answers={this.state.answers.length} />\n                <AnswerList answerList = {this.state.answers}/>\n                \n                <AuthContext.Consumer>\n                    {context => <AddAnswerForm \n                        questionId = {selectedQuestion.id}\n                        username={context.username}\n                        newAnswer={this.state.newAnswer}\n                        onNewAnswerChange={this.onNewAnswerChange}\n                        onNewAnswerSubmit={this.onNewAnswerSubmit}/>}\n                </AuthContext.Consumer>\n            </div>\n        );\n    }\n}\n\nQuestionDetailPage.defaultProps = {\n    selectedQuestion: {\n        id: '',\n        text: '',\n        user: '',\n        creationDate: '',\n        answers:[]\n    }\n};\n\nQuestionDetailPage.propTypes = {\n    backButtonClicked : PropTypes.func,\n    selectedQuestion: PropTypes.object\n};\n\nexport default QuestionDetailPage;\n\n\n"]},"metadata":{},"sourceType":"module"}